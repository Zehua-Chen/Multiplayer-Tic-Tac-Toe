# Server APIs

## About 

* For typescript users, there is a typing file in the `/shared/interfaces` folder
that define the data sent between the server and the client

* To access an element of a two-dimensional array, the first index is the 
row # and the second index is the column #;

## Http

### Get

#### `/host_address`

Get the address of the server in local network;

##### Returns

* a `string` represents the address

#### `/players`

Get an array of players that have been registered in the server.

##### Returns

* A `TicTacToe.IPlayer<T>[]` representing the players

#### `/progress`

Get the progress of the current game.

##### Returns

* Typescript: an object of type `IProgressResponse`;
* Javascript: an object containing the following properties
    * `remaining (number)`: the cells left on the board;
    * `total (number)`: the total amount of cells on the board;
    
#### `/winner`

Get the winner of the game, if there is one.

#### Returns

* Typescript: an object of type `IWinnerResponse`;
* Javascript: an object containing the following properties
    * `name (string)`: the name of the player;
    
#### `/board`

* Typescript: an object of type `IBoardResponse`;
* Javascript: a two dimensional string array representing the board;

#### `/moving_player`

* Typescript: an object of type `IMovingPlayerResponse`;
* Javascript an object containing the name of the moving player.

### Post

#### `/create_game` 

Create a new game.

##### Data

* Typescript: an object of type `TicTacToe.ICreateGameRequest`;
* Javascript: an object containing the following two properties:
    * `name (string)` name of the player who created this game;
    * `invitationCode (string)` the code another player needs to join the game;
    
##### Returns

* Typescript: an object of type `TicTacToe.ICreateGameResponse`;
* Javascript: an object containing the following property:
    * `success (boolean)` if the operation is successful
    * `errorMessage (string)` the error message generated by the server.
    
#### `/join_game` 

Joing an existing game.

##### Data

* Typescript: an object of type `TicTacToe.IJoinGameResponse`;
* Javascript: an object containing the following two properties:
    * `name (string)` name of the player joined the game.
    * `invitationCode (string)` the code another player needs to join the game;
    
##### Returns

* Typescript: an object of type `TicTacToe.IJoinGameResponse`;
* Javascript: an object containing the following property:
    * `success (boolean)` if the operation is successful
    * `errorMessage (string)`ss the error message generated by the server.

## Web Socket

### Sent from Server

#### `new_plyaer`

Sent from the server when a new player have either joined or created the game.

##### Data

An object representing the new player.

* Typescript: an object of type `TicTacToe.IPlayer`;
* Javascript: an object that has hte following properties:
    * `name`: (`string`) name of the player
    
#### `update_user#`

Sent from server when the active connections amount changes

##### Data

An number representing the new amount

#### `update_moving`

Sent from the server when the player who is making a move changes

##### Data

* Typescript: an object of type `IUpdateMovingBroadcast`.
* Javascript: an object that has the following properties:
    * `name (string)` name of the player
    
#### `update_progress`

Sent by the server when the progress of the game changes.

##### Data

* Typescript: an object of type `IUpdateProgressBroadcast`;
* Javascript: an object containing the following properties
    * `remaining (number)`: the cells left on the board;
    * `total (number)`: the total amount of cells on the board;
    
#### `found_winner`

Sent by the server when there is a winner.

##### Data

* Typescript: an object of type `IFoundWinnerBroadcast`;
* Javascript: an object that has the following properties:
    * `name (string)` name of the player
    
### Sent by Client

#### `move`

Sent by client to make a move on the board. 

##### Discussion

The server will only carry out the move if 

* The invitation code matches
* It is the player's turn to move;

##### Data

* Typescript: an object of type `IMoveRequest`;
* Javascript: an object containing the following properties
    * `name (string)`: name of the player who is making the move;
    * `invitationCode (string)`: the invitation code that the user use to join 
    or create the game
    * `location ({y: number, x: number})`: where the move is made.